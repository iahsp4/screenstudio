<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright (C) 2014 Patrick Balleux

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

Tags:
@WEBCAMFPS          : Webcam framerate (-r)
@WEBCAMOFFSET       : Webcam delay in secconds (-itsoffset)
@WEBCAMW            : Webcam capture width (-s)
@WEBCAMH            : Webcam capture height (-s)
@WEBCAMDEV          : Webcam device (/dev/video0) (-i)
@BANNERSRC          : Overlay file imamge source (-i)
@DESKTOPW           : Desktop capture width (-s)
@DESKTOPH           : Desktop capture height (-s)
@DESKTOPFPS         : Desktop capture framerate (-r)
@DESKTOPX           : Desktop capture X position (-i 0:0+X,Y)
@DESKTOPY           : Desktop capture Y position (-i 0:0+X,Y)
@WEBCAMLAYOUT       : Webcam layout to use (with -filter_complex)
@PULSEDEV           : Pulseaudio source name (-f avfoundation -i xxx)
@OUTW               : Output size width (-s WxH)
@OUTH               : Output size height (-s WxH)
@OUTFPS             : Output framerate  (-r)
@OUTAUDIORATE       : Output audio frequency rate (-ar)
@OUTVIDEORATE        : Output video bitrate (-vb)
@OUTAUDIOBITRATE    : Output audio bitrate (-ab)
@VIDEOCODEC         : Output video codec (-vc)
@PRESET             : Video preset (-preset)
@AUDIOCODEC         : Video audio codec (-ac)
@BUFFERSIZE         : Buffer size : (-buffersize)
@MUXER              : Muxer format (-f)
@OUTSINK            : Output sink ( file.flv, rtmp://server/live2/key)
@GROUP              : Group size (-g), Value is in seconds...

In profiles, "format" defines the final outout.  Supported formats are: 240p,360p,480p,720p,1080p or Fullscreen
The "Fullscreen" value means the actual size of the desktop capture

In RTMP services, the "<server>" is optinal.  If no servers are defined, user will have to enter
the full URL/StreamKey manually

You can set the layout for webcam and overlay by using the <layout> tag.  The "value" is the string that will be used
in the final command line.  Types supported are: "webcam" and "overlay"

- Service target supported: RTMP, FILE
- Command name supported: WEBCAM, DESKTOP 
-->
<root>
    <services author="Patrick Balleux" os="OSX" backend="ffmpeg" version="1.4">
        <service name="Twitch.tv" target="RTMP">
            <commands>
                <command name="WEBCAM">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC  -filter_complex [0:0][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <command name="WEBCAMDESKTOP">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [2:0][0:0]overlay=@WEBCAMLAYOUT[out];[out][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <command name="DESKTOP">
                    @BINARYPATH/ffmpeg -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [1:0][0:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <layout type="webcam" location= "Lower Right" value="main_w-overlay_w:main_h-overlay_h"/>
                <layout type="webcam" location= "Lower Left" value="0:main_h-overlay_h"/>
                <layout type="webcam" location= "Top Right" value="main_w-overlay_w:0"/>
                <layout type="webcam" location= "Top Left" value="0:0"/>
                <layout type="webcam" location= "Center" value="main_w/2-overlay_w/2:main_h/2-overlay_h/2"/>
            </commands>
            <presets>
                <preset>ultrafast</preset>
                <preset>superfast</preset>
                <preset>veryfast</preset>
                <preset>faster</preset>
                <preset>fast</preset>
                <preset>medium</preset>
                <preset>slow</preset>
                <preset>slower</preset>
                <preset>veryslow</preset>
            </presets>
            <server name = "Amsterdam, NL" url="rtmp://live-ams.twitch.tv/app"/>
            <server name = "Stockholm, SE" url="rtmp://live-arn.justin.tv/app"/>
            <server name = "Paris, FR" url="rtmp://live-cdg.twitch.tv/app"/>
            <server name = "Dallas, TX" url="rtmp://live-dfw.twitch.tv/app"/>
            <server name = "Frankfurt, Germany" url="rtmp://live-fra.twitch.tv/app"/>
            <server name = "Ashburn, VA" url="rtmp://live-iad.twitch.tv/app"/>
            <server name = "New York, NY" url="rtmp://live-jfk.twitch.tv/app"/>
            <server name = "Los Angeles, CA" url="rtmp://live-lax.twitch.tv/app"/>
            <server name = "London, UK" url="rtmp://live-lhr.twitch.tv/app"/>
            <server name = "Miami, FL" url="rtmp://live-mia.twitch.tv/app"/>
            <server name = "Chicago, IL" url="rtmp://live-ord.twitch.tv/app"/>
            <server name = "Prague, CZ" url="rtmp://live-prg.twitch.tv/ap"/>
            <server name = "Singapore" url="rtmp://live-sin-backup.twitch.tv/app"/>
            <server name = "San Francisco, CA" url="rtmp://live.twitch.tv/app"/>
            
            <profile name="1080p" buffersize="4500" muxer="flv" group="2" format="1080p">
                <video preset="ultrafast" codec="libx264" bitrate="4500"  minrate="4500" maxrate="4500"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="720p" buffersize="2000" muxer="flv" group="2" format="720p">
                <video preset="ultrafast" codec="libx264" bitrate="2000"  minrate="2000" maxrate="2000" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="480p" buffersize="1200" muxer="flv" group="2" format="480p">
                <video preset="ultrafast" codec="libx264" bitrate="1200"  minrate="1200" maxrate="1200" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="360p" buffersize="800" muxer="flv" group="2" format="360p">
                <video preset="ultrafast" codec="libx264" bitrate="800"  minrate="800" maxrate="800" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="240p" buffersize="500" muxer="flv" group="2" format="240p">
                <video preset="ultrafast" codec="libx264" bitrate="500"  minrate="500" maxrate="500" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            
        </service>
        <service name="Hitbox" target="RTMP">
            <commands>
                <command name="WEBCAM">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC  -filter_complex [0:0][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <command name="WEBCAMDESKTOP">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [2:0][0:0]overlay=@WEBCAMLAYOUT[out];[out][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <command name="DESKTOP">
                    @BINARYPATH/ffmpeg -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [1:0][0:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <layout type="webcam" location= "Lower Right" value="main_w-overlay_w:main_h-overlay_h"/>
                <layout type="webcam" location= "Lower Left" value="0:main_h-overlay_h"/>
                <layout type="webcam" location= "Top Right" value="main_w-overlay_w:0"/>
                <layout type="webcam" location= "Top Left" value="0:0"/>
                <layout type="webcam" location= "Center" value="main_w/2-overlay_w/2:main_h/2-overlay_h/2"/>
            </commands>
            <presets>
                <preset>ultrafast</preset>
                <preset>superfast</preset>
                <preset>veryfast</preset>
                <preset>faster</preset>
                <preset>fast</preset>
                <preset>medium</preset>
                <preset>slow</preset>
                <preset>slower</preset>
                <preset>veryslow</preset>
            </presets>
            
            <server name = "Default" url="rtmp://live.hitbox.tv/push"/>
            <server name = "EU-East" url="rtmp://live.vie.hitbox.tv/push"/>
            <server name = "EU-Central" url="rtmp://live.nbg.hitbox.tv/push"/>
            <server name = "EU-West" url="rtmp://live.fra.hitbox.tv/push"/>
            <server name = "EU-North" url="rtmp://live.ams.hitbox.tv/push"/>
            <server name = "US-East" url="rtmp://live.vgn.hitbox.tv/push"/>
            <server name = "US-West" url="rtmp://live.lax.hitbox.tv/push"/>
            <server name = "South America" url="rtmp://live.gru.hitbox.tv/push"/>
            <server name = "South Korea" url="rtmp://live.icn.hitbox.tv/push"/>
            <server name = "United Kingdom" url="rtmp://live.lhr.hitbox.tv/pus"/>h
            <server name = "South America" url="rtmp://live.gru.hitbox.tv/push"/>
      
            <profile name="1080p" buffersize="4500" muxer="flv" group="2" format="1080p">
                <video preset="ultrafast" codec="libx264" bitrate="4500"  minrate="4500" maxrate="4500"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="720p" buffersize="2000" muxer="flv" group="2" format="720p">
                <video preset="ultrafast" codec="libx264" bitrate="2000"  minrate="2000" maxrate="2000" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="480p" buffersize="1200" muxer="flv" group="2" format="480p">
                <video preset="ultrafast" codec="libx264" bitrate="1200"  minrate="1200" maxrate="1200" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="360p" buffersize="800" muxer="flv" group="2" format="360p">
                <video preset="ultrafast" codec="libx264" bitrate="800"  minrate="800" maxrate="800" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="240p" buffersize="500" muxer="flv" group="2" format="240p">
                <video preset="ultrafast" codec="libx264" bitrate="500"  minrate="500" maxrate="500" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
        </service>
        <service name="Ustream/Generic" target="RTMP">
            <commands>
                <command name="WEBCAM">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC  -filter_complex [0:0][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <command name="WEBCAMDESKTOP">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [2:0][0:0]overlay=@WEBCAMLAYOUT[out];[out][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <command name="DESKTOP">
                    @BINARYPATH/ffmpeg -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [1:0][0:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <layout type="webcam" location= "Lower Right" value="main_w-overlay_w:main_h-overlay_h"/>
                <layout type="webcam" location= "Lower Left" value="0:main_h-overlay_h"/>
                <layout type="webcam" location= "Top Right" value="main_w-overlay_w:0"/>
                <layout type="webcam" location= "Top Left" value="0:0"/>
                <layout type="webcam" location= "Center" value="main_w/2-overlay_w/2:main_h/2-overlay_h/2"/>
            </commands>
            <presets>
                <preset>ultrafast</preset>
                <preset>superfast</preset>
                <preset>veryfast</preset>
                <preset>faster</preset>
                <preset>fast</preset>
                <preset>medium</preset>
                <preset>slow</preset>
                <preset>slower</preset>
                <preset>veryslow</preset>
            </presets>
            <profile name="1080p" buffersize="4500" muxer="flv" group="2" format="1080p">
                <video preset="ultrafast" codec="libx264" bitrate="4500"  minrate="4500" maxrate="4500"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="720p" buffersize="2000" muxer="flv" group="2" format="720p">
                <video preset="ultrafast" codec="libx264" bitrate="2000"  minrate="2000" maxrate="2000" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="480p" buffersize="1200" muxer="flv" group="2" format="480p">
                <video preset="ultrafast" codec="libx264" bitrate="1200"  minrate="1200" maxrate="1200" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="360p" buffersize="800" muxer="flv" group="2" format="360p">
                <video preset="ultrafast" codec="libx264" bitrate="800"  minrate="800" maxrate="800" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="240p" buffersize="500" muxer="flv" group="2" format="240p">
                <video preset="ultrafast" codec="libx264" bitrate="500"  minrate="500" maxrate="500" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
        </service>
        <service name="Stream With Local Recording" target="RTMP">
            <commands>
                <command name="WEBCAM">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC  -filter_complex [0:0][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -map 0:v -map 2:a -f @MUXER @LOCALSINK
                </command>
                <command name="WEBCAMDESKTOP">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [2:0][0:0]overlay=@WEBCAMLAYOUT[out];[out][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK  -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -map 2:v -map 3:a -f @MUXER @LOCALSINK
                </command>
                <command name="DESKTOP">
                    @BINARYPATH/ffmpeg -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [1:0][0:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK  -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -map 1:v -map 2:a -f @MUXER @LOCALSINK
                </command>
                <layout type="webcam" location= "Lower Right" value="main_w-overlay_w:main_h-overlay_h"/>
                <layout type="webcam" location= "Lower Left" value="0:main_h-overlay_h"/>
                <layout type="webcam" location= "Top Right" value="main_w-overlay_w:0"/>
                <layout type="webcam" location= "Top Left" value="0:0"/>
                <layout type="webcam" location= "Center" value="main_w/2-overlay_w/2:main_h/2-overlay_h/2"/>
            </commands>
            <presets>
                <preset>ultrafast</preset>
                <preset>superfast</preset>
                <preset>veryfast</preset>
                <preset>faster</preset>
                <preset>fast</preset>
                <preset>medium</preset>
                <preset>slow</preset>
                <preset>slower</preset>
                <preset>veryslow</preset>
            </presets>
            <profile name="1080p" buffersize="4500" muxer="flv" group="2" format="1080p">
                <video preset="ultrafast" codec="libx264" bitrate="4500"  minrate="4500" maxrate="4500"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="720p" buffersize="2000" muxer="flv" group="2" format="720p">
                <video preset="ultrafast" codec="libx264" bitrate="2000"  minrate="2000" maxrate="2000" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="480p" buffersize="1200" muxer="flv" group="2" format="480p">
                <video preset="ultrafast" codec="libx264" bitrate="1200"  minrate="1200" maxrate="1200" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="360p" buffersize="800" muxer="flv" group="2" format="360p">
                <video preset="ultrafast" codec="libx264" bitrate="800"  minrate="800" maxrate="800" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="240p" buffersize="500" muxer="flv" group="2" format="240p">
                <video preset="ultrafast" codec="libx264" bitrate="500"  minrate="500" maxrate="500" ></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
        </service>
        <service name="Youtube Live" target="RTMP">
            <commands>
                <command name="WEBCAM">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC  -filter_complex [0:0][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <command name="WEBCAMDESKTOP">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET -i @WEBCAMDEV: -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [2:0][0:0]overlay=@WEBCAMLAYOUT[out];[out][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <command name="DESKTOP">
                    @BINARYPATH/ffmpeg -f image2  -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [1:0][0:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f @MUXER @OUTSINK
                </command>
                <layout type="webcam" location= "Lower Right" value="main_w-overlay_w:main_h-overlay_h"/>
                <layout type="webcam" location= "Lower Left" value="0:main_h-overlay_h"/>
                <layout type="webcam" location= "Top Right" value="main_w-overlay_w:0"/>
                <layout type="webcam" location= "Top Left" value="0:0"/>
                <layout type="webcam" location= "Center" value="main_w/2-overlay_w/2:main_h/2-overlay_h/2"/>
            </commands>
            <server name = "Primary" url="rtmp://a.rtmp.youtube.com/live2"/>
            <server name = "Backup" url="rtmp://b.rtmp.youtube.com/live2?backup=1"/>
            <presets>
                <preset>ultrafast</preset>
                <preset>superfast</preset>
                <preset>veryfast</preset>
                <preset>faster</preset>
                <preset>fast</preset>
                <preset>medium</preset>
                <preset>slow</preset>
                <preset>slower</preset>
                <preset>veryslow</preset>
            </presets>
            <profile name="1080p" buffersize="4500" muxer="flv" group="2" format="1080p">
                <video preset="ultrafast" codec="libx264" bitrate="4500"  minrate="4500" maxrate="4500"></video>
                <audio codec="aac" bitrate="128" channel="1" rate="44100"></audio>
            </profile>
            <profile name="720p" buffersize="2000" muxer="flv" group="2" format="720p">
                <video preset="ultrafast" codec="libx264" bitrate="2000"  minrate="2000" maxrate="2000" ></video>
                <audio codec="aac" bitrate="128" channel="1" rate="44100"></audio>
            </profile>
            <profile name="480p" buffersize="1200" muxer="flv" group="2" format="480p">
                <video preset="ultrafast" codec="libx264" bitrate="1200"  minrate="1200" maxrate="1200" ></video>
                <audio codec="aac" bitrate="128" channel="1" rate="44100"></audio>
            </profile>
            <profile name="360p" buffersize="800" muxer="flv" group="2" format="360p">
                <video preset="ultrafast" codec="libx264" bitrate="800"  minrate="800" maxrate="800" ></video>
                <audio codec="aac" bitrate="128" channel="1" rate="44100"></audio>
            </profile>
            <profile name="240p" buffersize="500" muxer="flv" group="2" format="240p">
                <video preset="ultrafast" codec="libx264" bitrate="500"  minrate="500" maxrate="500" ></video>
                <audio codec="aac" bitrate="128" channel="1" rate="44100"></audio>
            </profile>
        </service>
        <service name="Record to FLV" target="FILE">
            <commands>
                <command name="WEBCAM">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET  -i @WEBCAMDEV: -f image2  -i @BANNERSRC  -filter_complex [0:0][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f mpegts @OUTSINK
                </command>
                <command name="WEBCAMDESKTOP">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET  -i @WEBCAMDEV: -f image2 -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [2:0][0:0]overlay=@WEBCAMLAYOUT[out];[out][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f mpegts @OUTSINK
                </command>
                <command name="DESKTOP">
                    @BINARYPATH/ffmpeg -f image2 -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [1:0][0:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f mpegts @OUTSINK
                </command>
                <layout type="webcam" location= "Lower Right" value="main_w-overlay_w:main_h-overlay_h"/>
                <layout type="webcam" location= "Lower Left" value="0:main_h-overlay_h"/>
                <layout type="webcam" location= "Top Right" value="main_w-overlay_w:0"/>
                <layout type="webcam" location= "Top Left" value="0:0"/>
                <layout type="webcam" location= "Center" value="main_w/2-overlay_w/2:main_h/2-overlay_h/2"/>
            </commands>
            <presets>
                <preset>ultrafast</preset>
                <preset>superfast</preset>
                <preset>veryfast</preset>
                <preset>faster</preset>
                <preset>fast</preset>
                <preset>medium</preset>
                <preset>slow</preset>
                <preset>slower</preset>
                <preset>veryslow</preset>
            </presets>
            <profile name="Full Screen" buffersize="4096" muxer="flv" group="2" format="Fullscreen">
                <video preset="ultrafast" codec="libx264" bitrate="15000"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="1080p" buffersize="4500" muxer="flv" group="2" format="1080p">
                <video preset="ultrafast" codec="libx264" bitrate="15000"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="720p" buffersize="2000" muxer="flv" group="2" format="720p">
                <video preset="ultrafast" codec="libx264" bitrate="9000"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="480p" buffersize="1200" muxer="flv" group="2" format="480p">
                <video preset="ultrafast" codec="libx264" bitrate="4500"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="360p" buffersize="800" muxer="flv" group="2" format="360p">
                <video preset="ultrafast" codec="libx264" bitrate="3000"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="240p" buffersize="500" muxer="flv" group="2" format="240p">
                <video preset="ultrafast" codec="libx264" bitrate="1500"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>            
        </service>
        <service name="Record to MOV" target="FILE">
            <commands>
                <command name="WEBCAM">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET  -i @WEBCAMDEV: -f image2  -i @BANNERSRC  -filter_complex [0:0][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f mov @OUTSINK
                </command>
                <command name="WEBCAMDESKTOP">
                    @BINARYPATH/ffmpeg -f avfoundation -itsoffset @WEBCAMOFFSET  -i @WEBCAMDEV: -f image2 -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [2:0][0:0]overlay=@WEBCAMLAYOUT[out];[out][1:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f mov @OUTSINK
                </command>
                <command name="DESKTOP">
                    @BINARYPATH/ffmpeg -f image2 -i @BANNERSRC -f avfoundation -r @DESKTOPFPS -i @SCREENDEV: -filter_complex [1:0][0:0]overlay=0:0 -f avfoundation -i :@PULSEDEV -r @OUTFPS -s @OUTWx@OUTH  -ar @OUTAUDIORATE -vb @OUTVIDEORATEk -ab @OUTAUDIOBITRATEk -strict experimental -y -vcodec @VIDEOCODEC  -preset @PRESET -acodec @AUDIOCODEC -bufsize @BUFFERSIZEk -g @GROUP -f mov @OUTSINK
                </command>
                <layout type="webcam" location= "Lower Right" value="main_w-overlay_w:main_h-overlay_h"/>
                <layout type="webcam" location= "Lower Left" value="0:main_h-overlay_h"/>
                <layout type="webcam" location= "Top Right" value="main_w-overlay_w:0"/>
                <layout type="webcam" location= "Top Left" value="0:0"/>
                <layout type="webcam" location= "Center" value="main_w/2-overlay_w/2:main_h/2-overlay_h/2"/>
            </commands>
            <presets>
                <preset>ultrafast</preset>
                <preset>superfast</preset>
                <preset>veryfast</preset>
                <preset>faster</preset>
                <preset>fast</preset>
                <preset>medium</preset>
                <preset>slow</preset>
                <preset>slower</preset>
                <preset>veryslow</preset>
            </presets>
            <profile name="Full Screen" buffersize="4096" muxer="mov" group="2" format="Fullscreen">
                <video preset="ultrafast" codec="libx264" bitrate="15000"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="1080p" buffersize="4500" muxer="mov" group="2" format="1080p">
                <video preset="ultrafast" codec="libx264" bitrate="15000"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="720p" buffersize="2000" muxer="mov" group="2" format="720p">
                <video preset="ultrafast" codec="libx264" bitrate="9000"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="480p" buffersize="1200" muxer="flv" group="2" format="480p">
                <video preset="ultrafast" codec="libx264" bitrate="4500"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="360p" buffersize="800" muxer="flv" group="2" format="360p">
                <video preset="ultrafast" codec="libx264" bitrate="3000"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>
            <profile name="240p" buffersize="500" muxer="flv" group="2" format="240p">
                <video preset="ultrafast" codec="libx264" bitrate="1500"></video>
                <audio codec="aac" bitrate="128" channel="2" rate="44100"></audio>
            </profile>            
        </service>
    </services>
</root>
